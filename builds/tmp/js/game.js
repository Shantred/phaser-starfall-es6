!function e(t,r,n){function a(o,s){if(!r[o]){if(!t[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(i)return i(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[o]={exports:{}};t[o][0].call(c.exports,function(e){var r=t[o][1][e];return a(r?r:e)},c,c.exports,e,t,r,n)}return r[o].exports}for(var i="function"==typeof require&&require,o=0;o<n.length;o++)a(n[o]);return a}({1:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}var a=e("./states"),i=n(a),o=new Phaser.Game(400,480,Phaser.AUTO,"");Object.keys(i).forEach(function(e){return o.state.add(e,i[e])}),o.state.start("Boot")},{"./states":9}],2:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function u(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:u(a,t,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)},l=function(e){function t(e){var r=e.game,i=e.x,o=e.y,s=e.asset,l=e.frame;n(this,t);var u=a(this,Object.getPrototypeOf(t).call(this,r,i,o,s,l));return u.game=r,u.decayTimer=null,u.anchor.setTo(.5,.5),u.scale.set(.8),u.animations.add("flash",[0,1,0,1,0,1,0,1,0,1,0,1,0,1,0],15,!1),u}return i(t,e),o(t,[{key:"reset",value:function(e,r){this.resetDecay(),s(Object.getPrototypeOf(t.prototype),"reset",this).call(this,e,r)}},{key:"flash",value:function(){this.animations.getAnimation("flash").isPlaying||this.animations.getAnimation("flash").play(15,!1,!0)}},{key:"resetDecay",value:function(){console.log("resetDecay called"),this.animations.getAnimation("flash").isPlaying&&(this.animations.stop(),this.frame=0),null!==this.decayTimer&&(console.log("attempting to clear timer",this.decayTimer),this.game.time.events.destroy(this.decayTimer),this.decayTimer=null)}},{key:"collect",value:function(){this.resetDecay(),this.exists=!1}},{key:"decay",value:function(){null===this.decayTimer&&(console.log("initializing decay timer"),this.decayTimer=this.game.time.create(!0),this.decayTimer.add(2e3,this.flash,this),this.decayTimer.start())}}]),t}(Phaser.Sprite);r["default"]=l},{}],3:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var o=function(e){function t(e){var r=e.game,i=e.x,o=e.y,s=e.width,l=e.height,u=e.asset;n(this,t);var c=a(this,Object.getPrototypeOf(t).call(this,r,i,o,s,l,u));return c.game=r,c.scale.setTo(.5,.35),c.game.physics.arcade.enable(c),c.body.allowGravity=!1,c.body.immovable=!0,c}return i(t,e),t}(Phaser.TileSprite);r["default"]=o},{}],4:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e){function t(e){var r=e.game;n(this,t);var i=a(this,Object.getPrototypeOf(t).call(this,r));return i.game=r,i.timerPaused=!1,i.diamondScore=0,i.diamondsLabel="x ",i.diamondSprite=new Phaser.Sprite(i.game,i.game.world.width-87,16,"diamond"),i.diamondSprite.frame=0,i.diamondSprite.scale.setTo(.8,.8),i.diamondText=new Phaser.Text(i.game,i.game.world.width-59,16,i.diamondsLabel+i.diamondScore,{font:"18pt Passion One",fill:"white",align:"center"}),i.diamondText.setShadow(2,2,"#000",0),i.startTime=i.game.time.now,i.minutes=0,i.seconds=0,i.timerText=new Phaser.Text(i.game,i.game.world.centerX-30,16,"00:00",{font:"18pt Passion One",fill:"white",align:"center"}),i.timerText.setShadow(2,2,"#000",0),i.add(i.diamondSprite),i.add(i.diamondText),i.add(i.timerText),i}return i(t,e),o(t,[{key:"update",value:function(){this.timerPaused||(this.minutes=Math.floor((this.game.time.now-this.startTime)/6e4)%60,this.seconds=Math.floor((this.game.time.now-this.startTime)/1e3)%60,this.minutes<10&&(this.minutes="0"+this.minutes),this.seconds<10&&(this.seconds="0"+this.seconds),this.timerText.text=this.minutes+":"+this.seconds)}},{key:"addCollectable",value:function(e){this.diamondScore+=e,this.diamondText.text=this.diamondsLabel+this.diamondScore}}]),t}(Phaser.Group);r["default"]=s},{}],5:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e){function t(e){var r=e.game,i=e.x,o=e.y,s=e.asset,l=e.health;n(this,t);var u=a(this,Object.getPrototypeOf(t).call(this,r,i,o,s));return u.game=r,u.health=l,u.hasControl=!0,u.game.physics.arcade.enable(u),u.body.bounce.y=0,u.body.gravity.y=300,u.body.collideWorldBounds=!0,u.animations.add("left",[0,1,2,3],10,!0),u.animations.add("right",[5,6,7,8],10,!0),u.body.setSize(28,36,2,12),u}return i(t,e),o(t,[{key:"update",value:function(){this.body.velocity.x=0,this.health<=0&&(this.hasControl=!1,this.animations.stop()),this.hasControl&&(this.game.input.keyboard.isDown(Phaser.Keyboard.LEFT)?(this.body.velocity.x=-275,this.animations.play("left")):this.game.input.keyboard.isDown(Phaser.Keyboard.RIGHT)?(this.body.velocity.x=275,this.animations.play("right")):(this.animations.stop(),this.frame=4))}},{key:"damage",value:function(e){this.health-=e}}]),t}(Phaser.Sprite);r["default"]=s},{}],6:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e){function t(e){var r=e.game,i=e.x,o=e.y,s=e.asset,l=e.health;n(this,t);var u=a(this,Object.getPrototypeOf(t).call(this,r,i,o,s));return u.game=r,u.health=l,u.anchor.setTo(.5,.5),u.checkWorldBounds=!0,u.outOfBoundsKill=!0,u}return i(t,e),o(t,[{key:"damage",value:function(e){this.health-=e}}]),t}(Phaser.Sprite);r["default"]=s},{}],7:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e){function t(){return n(this,t),a(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),o(t,[{key:"preload",value:function(){this.game.stage.backgroundColor="#000",this.load.image("loaderBg","img/loader-bg.png"),this.load.image("loaderBar","img/loader-bar.png")}},{key:"create",value:function(){this.scale.pageAlignHorizontally=!0,this.scale.pageAlignVertically=!0,this.game.physics.startSystem(Phaser.Physics.ARCADE),this.state.start("Preload")}}]),t}(Phaser.State);r["default"]=s},{}],8:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e){function t(){return n(this,t),a(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),o(t,[{key:"create",value:function(){var e=this;console.log("hit create"),this.gameOverText=new Phaser.Text(this.game,this.game.world.centerX,this.game.world.centerY,"Game Over!",{font:"24pt Paytone One",fill:"white",align:"center"}),this.gameOverText.anchor.setTo(.5,.5),this.gameOverText.setShadow(2,2,"#000",0),this.restart=new Phaser.Button(this.game,this.game.world.centerX,this.game.world.centerY+55,"ui",!1,!1,8,8,7,8),this.restart.anchor.setTo(.5,.5),this.restart.scale.setTo(.5,.5),this.restart.onInputUp.add(function(){e.state.start("Play")}),this.gameOverUI=this.add.group(),this.gameOverUI.add(this.gameOverText),this.gameOverUI.add(this.restart)}}]),t}(Phaser.State);r["default"]=s},{}],9:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var a=e("./boot");Object.defineProperty(r,"Boot",{enumerable:!0,get:function(){return n(a)["default"]}});var i=e("./preload");Object.defineProperty(r,"Preload",{enumerable:!0,get:function(){return n(i)["default"]}});var o=e("./play");Object.defineProperty(r,"Play",{enumerable:!0,get:function(){return n(o)["default"]}});var s=e("./gameover");Object.defineProperty(r,"Gameover",{enumerable:!0,get:function(){return n(s)["default"]}});var l=e("./menu");Object.defineProperty(r,"Menu",{enumerable:!0,get:function(){return n(l)["default"]}})},{"./boot":7,"./gameover":8,"./menu":10,"./play":11,"./preload":12}],10:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e){function t(){return n(this,t),a(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),o(t,[{key:"create",value:function(){var e=this;this.bg=this.game.add.image(0,0,"sky"),this.playButton=new Phaser.Button(this.game,this.game.world.centerX,this.game.world.centerY+35,"ui",!1,!1,6,6,5,6),this.playButton.anchor.setTo(.5,.5),this.playButton.scale.setTo(.5,.5),this.playButton.onInputUp.add(function(){e.state.start("Play")}),this.title=new Phaser.Text(this.game,this.game.world.centerX,this.game.world.centerY-75,"Phaser \nStarfall",{font:"28pt Paytone One",fill:"white",align:"center"}),this.title.anchor.setTo(.5,.5),this.title.setShadow(2,2,"#000",0),this.menuUI=this.add.group(),this.menuUI.add(this.playButton),this.menuUI.add(this.title)}}]),t}(Phaser.State);r["default"]=s},{}],11:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=e("../prefabs/player"),u=n(l),c=e("../prefabs/star"),h=n(c),f=e("../prefabs/diamond"),d=n(f),p=e("../prefabs/hud"),y=n(p),m=e("../prefabs/floor"),g=n(m),b=function(e){function t(){return a(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,e),s(t,[{key:"create",value:function(){this.bg=this.game.add.image(0,0,"sky"),this.game.physics.startSystem(Phaser.Physics.ARCADE),this.hud=new y["default"]({game:this.game}),this.platforms=this.add.group(),this.floor=new g["default"]({game:this.game,x:0,y:this.game.world.height-43,width:800,height:124,asset:"ground_sheet"}),this.platforms.add(this.floor),this.player=this.add.group();var e=new u["default"]({game:this.game,x:this.game.world.width/2-32,y:this.game.world.height-90,asset:"dude",health:10});this.player.add(e),this.stars=this.add.group(),this.stars.enableBody=!0,this.diamonds=this.add.group(),this.diamonds.enableBody=!0,this.minXGravity=800,this.maxXGravity=600,this.starLevel=0,this.starSpawnDelay=500,this.minStarDelay=100,this.starTimer=this.game.time.create(!0),this.starTimer.add(500,this.spawnStar,this),this.starTimer.start(),this.game.world.bringToTop(this.hud)}},{key:"update",value:function(){this.game.physics.arcade.collide(this.player,this.platforms),this.game.physics.arcade.collide(this.diamonds,this.platforms,this.collectableDecay,null,this),this.game.physics.arcade.overlap(this.player,this.stars,this.starCollision,null,this),this.game.physics.arcade.overlap(this.diamonds,this.player,this.collectItem,null,this)}},{key:"spawnStar",value:function(){this.starLevel++;var e=this.game.rnd.integerInRange(1,15);if(1===e){var t=this.diamonds.getFirstExists(!1);t?(console.log("Using existing diamond",t),t.reset(this.game.rnd.integerInRange(1,this.game.world.width-22),1)):(console.log("Creating new diamond"),t=new d["default"]({game:this.game,x:this.game.rnd.integerInRange(10,this.game.world.width-22),y:1,asset:"diamond",frame:0}),this.diamonds.add(t),t.body.gravity.y=this.maxXGravity)}else{var r=this.stars.getFirstExists(!1);r?r.reset(this.game.rnd.integerInRange(1,this.game.world.width-22),1):(r=new h["default"]({game:this.game,x:this.game.rnd.integerInRange(10,this.game.world.width-22),y:1,asset:"star",health:1}),this.stars.add(r),r.body.gravity.y=this.game.rnd.integerInRange(600,800))}var n=this.starSpawnDelay-3*this.starLevel;n<this.minStarDelay&&(n=this.minStarDelay),this.starTimer=this.game.time.create(!0),this.starTimer.add(n,this.spawnStar,this),this.starTimer.start()}},{key:"starCollision",value:function(e,t){e.damage(10),t.damage(10),e.health<=0&&this.gameOver()}},{key:"gameOver",value:function(){this.game.physics.arcade.isPaused=!0,this.hud.timerPaused=!0,this.state.start("Gameover",!1,!1)}},{key:"collectableDecay",value:function(e){e.decay()}},{key:"collectItem",value:function(e){this.hud.addCollectable(1),e.collect()}}]),t}(Phaser.State);r["default"]=b},{"../prefabs/diamond":2,"../prefabs/floor":3,"../prefabs/hud":4,"../prefabs/player":5,"../prefabs/star":6}],12:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e){function t(){return n(this,t),a(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),o(t,[{key:"preload",value:function(){this.game.load.script("webfont","//ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js"),this.loaderBg=this.add.sprite(this.game.world.centerX,this.game.world.centerY,"loaderBg"),this.loaderBar=this.add.sprite(this.game.world.centerX,this.game.world.centerY,"loaderBar"),this.loaderBg.anchor.setTo(.5),this.loaderBar.anchor.setTo(.5),this.load.setPreloadSprite(this.loaderBar),this.game.load.image("sky","img/day.png"),this.game.load.image("star","img/star.png"),this.game.load.spritesheet("diamond","img/diamond.png",32,28),this.game.load.spritesheet("dude","img/dude.png",32,48),this.game.load.spritesheet("ground_sheet","img/spritesheet/ground_sheet.png",260,124),this.load.atlasJSONArray("ui","img/spritesheet/ui.png","data/spritesheet/ui.json")}},{key:"create",value:function(){this.state.start("Menu")}}]),t}(Phaser.State);r["default"]=s},{}]},{},[1]);